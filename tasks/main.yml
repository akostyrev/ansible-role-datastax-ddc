---
# tasks file for kostyrevaa.datastax-ddc

- name: import Datastax repo key
  rpm_key:
    state: present
    key: http://rpm.datastax.com/rpm/repo_key

- name: Add Datastax repository
  yum_repository:
    name: "datastax-ddc-{{ datastax_ddc_version }}"
    description: "datastax ddc {{ datastax_ddc_version }}"
    baseurl: "http://rpm.datastax.com/datastax-ddc/{{ datastax_ddc_version }}"
    enabled: yes

- name: Install packages
  package: name={{ item }}
  with_items:
    - datastax-ddc
    - jemalloc


- name: enable cassandra service
  service:
    name: cassandra
    enabled: yes
